angular.module("phoneList",["ngMessages","ngMask","angular-loading-bar"]),angular.module("phoneList").controller("phoneListController",["$scope","APIContact","APICompany",function(e,n,t){e.app="Phone List",e.successMessage=null,e.errorMessage=null,e.contacts=[];var o=function(){n.getContacts().success(function(n,t){e.contacts=n}).error(function(n,t){e.errorMessage="An error occurred loading contacts."})};e.companies=[];var r=function(){t.getCompanies().success(function(n,t){e.companies=n}).error(function(n,t){e.errorMessage="An error occurred while loading companies."})};e.addContact=function(t){e.eraseMessages(),n.postContact(t).success(function(n,t){0==n.status?e.errorMessage=n.errors:(delete e.contact,e.contactForm.$setPristine(),e.successMessage=n.message,o())}).error(function(n,t){e.errorMessage=[{0:"An error occurred while creating."}]})},e.deleteContacts=function(t){e.eraseMessages(),e.contacts=t.filter(function(t){return t.selected?void n.deleteContact(t).success(function(n,t){0==n.status?e.errorMessage=n.errors:(e.successMessage=n.message,o())}).error(function(n,t){e.errorMessage=[{0:"An error occurred while deleting."}]}):t})},e.eraseMessages=function(){e.successMessage=null,e.errorMessage=null},e.isContactSelected=function(e){return e.some(function(e){return e.selected})},e.tableOrderBy=function(n){e.fieldOrdenation=n,e.directionOrdenation=!e.directionOrdenation},o(),r()}]),angular.module("phoneList").service("Config",function(){return window.location.host.match(/brunomartins\.com/)?this.API="http://api.phonelist.brunomartins.com/":this.API="http://localhost:8000/"}),angular.module("phoneList").config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!1}]),angular.module("phoneList").factory("APICompany",["$http","Config",function(e,n){var t=function(){return e.get(n.API+"companies")};return{getCompanies:t}}]),angular.module("phoneList").factory("APIContact",["$http","Config",function(e,n){var t=function(){return e.get(n.API+"contacts")},o=function(t){return e.post(n.API+"contacts/add",t)},r=function(t){return e.delete(n.API+"contacts/delete",{params:{contactId:t.contactId}})};return{getContacts:t,postContact:o,deleteContact:r}}]);